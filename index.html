<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dijkstra's Algorithm Tables</title>
  <style>
    table {
      border-collapse: collapse;
      width: 40%;
      margin: 20px;
    }

    table, th, td {
      border: 1px solid black;
    }

    th, td {
      padding: 10px;
      text-align: center;
    }

    textarea {
      margin: 10px;
      width: 80%;
      height: 100px;
    }
  </style>
</head>
<body>

<h2>Dijkstra's Algorithm Tables</h2>

<label for="graphInput">Enter Graph Data:</label>
<textarea id="graphInput" placeholder="1 2 1&#13;1 3 4&#13;2 3 2&#13;2 4 5&#13;3 4 1"></textarea>

<button onclick="updateGraph()">Update Graph</button>

<table id="distanceTable">
  <!-- The table for distances will be generated dynamically using JavaScript -->
</table>

<table id="predecessorTable">
  <!-- The table for predecessors will be generated dynamically using JavaScript -->
</table>

<script>
  let graph = {};

  function updateGraph() {
    const inputText = document.getElementById('graphInput').value;

    // Reset the graph
    graph = {};

    // Parse the input and update the graph
    const lines = inputText.split('\n');
    lines.forEach(line => {
      const [start, end, weight] = line.split(' ').map(Number);
      if (!graph[start]) graph[start] = {};
      graph[start][end] = weight;
    });

    // Display the updated tables
    displayTables();
  }

  // Dijkstra's algorithm implementation
  function dijkstra(graph, start) {
    const distance = {};
    const predecessor = {};
    const visited = {};
    const distanceTable = [];
    const predecessorTable = [];

    for (const node in graph) {
      distance[node] = Infinity;
      predecessor[node] = null;
      visited[node] = false;
    }

    distance[start] = 0;

    for (let i = 0; i < Object.keys(graph).length; i++) {
      let current = null;

      for (const node in graph) {
        if (!visited[node] && (current === null || distance[node] < distance[current])) {
          current = node;
        }
      }

      if (current === null) break;

      visited[current] = true;

      for (const neighbor in graph[current]) {
        const newDistance = distance[current] + graph[current][neighbor];

        if (newDistance < distance[neighbor]) {
          distance[neighbor] = newDistance;
          predecessor[neighbor] = current;
        }
      }

      // Build the distance table row for this step
      const distanceRow = Object.keys(graph).map(node => `<td>${distance[node] === Infinity ? 'âˆž' : distance[node]}</td>`);
      distanceTable.push(`<tr><td>${current}</td>${distanceRow.join('')}</tr>`);

      // Build the predecessor table row for this step
      const predecessorRow = Object.keys(graph).map(node => `<td>${predecessor[node] === null ? '-' : predecessor[node]}</td>`);
      predecessorTable.push(`<tr><td>${current}</td>${predecessorRow.join('')}</tr>`);
    }

    return { distanceTable, predecessorTable };
  }

  // Display the tables
  function displayTables() {
    const startNode = Object.keys(graph)[0] || 1; // Use the first node as the start if available
    const { distanceTable, predecessorTable } = dijkstra(graph, startNode);

    const distanceTableElement = document.getElementById('distanceTable');
    distanceTableElement.innerHTML = `<tr><th>Step</th>${Object.keys(graph).map(node => `<th>Dist(${node})</th>`).join('')}</tr>${distanceTable.join('')}`;

    const predecessorTableElement = document.getElementById('predecessorTable');
    predecessorTableElement.innerHTML = `<tr><th>Step</th>${Object.keys(graph).map(node => `<th>Pred(${node})</th>`).join('')}</tr>${predecessorTable.join('')}`;
  }

  // Initial display
  displayTables();
</script>

</body>
</html>
